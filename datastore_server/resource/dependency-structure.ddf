#
#
#
#show allResults

{root} = ch.systemsx.cisd
{openbis} = ${root}.openbis
{dss} = ${openbis}.dss
{etlserver} = ${root}.etlserver

######################################################################
# Check dependencies to openbis

[etlserver] = ${etlserver}.*
[dss] = ${dss}.*
[private_openbis] = ${openbis}.* excluding [dss] ${openbis}.generic.shared.*

check sets [dss] [etlserver]

check [dss] [etlserver] independentOf [private_openbis]

######################################################################
# Check dependencies of etlserver to dss

[dss.shared] = ${dss}.generic.shared.*
[private_dss] = ${dss}.* excluding [dss.shared] ${dss}.BuildAndEnvironmentInfo ${dss}.generic.DataStoreServer ${dss}.generic.server.api.v1.DssServiceRpcGeneric

check sets [dss.shared] [private_dss]

layer l1 = [dss.shared]
layer l2 = [etlserver] [private_dss]

check layeringOf l1 l2

######################################################################
# Check dependencies between the api client and the rest of dss
[dss.api.client] = ${dss}.client.api.* ${dss}.generic.shared.api.*
[dss.internal] = ${dss}.* excluding [dss.api.client]

check sets [dss.api.client] [dss.internal]

check [dss.api.client] independentOf [dss.internal]

######################################################################
# Check dependencies between the dss api and the etl api
[dss.api.server] = ${dss}.generic.server.api.* 
[etl.api.server] = ${etlserver}.api.*

check sets [dss.api.server] [etl.api.server]

layer dssApi = [dss.api.server]
layer etlApi = [etl.api.server]

check layeringOf etlApi dssApi
