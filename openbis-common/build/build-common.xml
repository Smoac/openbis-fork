<project name="openbis-common-common" basedir="..">
    <import file="../../build_resources/ant/build-common.xml" />

    <property name="original.dist" value="../${ant.project.name}/dist" />
    <property name="original.dist.server" value="${original.dist}/server" />
	
	<property name="targets.www" value="../${ant.project.name}/targets/www" />
	<property name="targets.www.web-inf" value="${targets.www}/WEB-INF" />
	<property name="targets.www.web-inf.classes" value="${targets.www.web-inf}/classes" />
	<property name="gwt.tomcat.web-inf" value="../${ant.project.name}/tomcat/webapps/ROOT/WEB-INF" />
    <!--
  	  // Cleans and prepares the GWT specific directories, forcing a GWT rebuilding.
      -->
    <target name="prepare-gwt"
            description="Cleans and prepares the GWT specific directories, forcing a GWT rebuilding.">
    	  <delete failonerror="true" dir="../${ant.project.name}/.gwt-cache" />
        <delete failonerror="true" includeEmptyDirs="true" removeNotFollowedSymlinks="true" quiet="true">
          <fileset dir="${targets.www}"  followsymlinks="false"/> 
        </delete>
    	  <mkdir dir="${targets.www}" />
    		<mkdir dir="${targets.www.web-inf}" />
        <copy todir="${targets.www.web-inf}" overwrite="true" failonerror="true">
            <fileset dir="../${ant.project.name}/${server-resource}" includes="*.xml" />
            <fileset dir="../common/${server-resource}" includes="*.xml"/>
        </copy>
  			<!-- Clear 'gwt.xml' file. -->
  			<echo file="${targets.www.web-inf}/gwt.xml" message="" />
    		<copy todir="${targets.www.web-inf.classes}" overwrite="true" failonerror="true">
        	<fileset dir="${classes}" />
        </copy>
    	<!-- For system tests -->
    	<copy todir="${gwt.tomcat.web-inf}" overwrite="true" failonerror="true">
    		<fileset dir="../${ant.project.name}/${server-resource}" includes="*.xml" />
    	  <fileset dir="../common/${server-resource}" includes="*.xml"/>
			</copy>
    </target>
	
		
</project>