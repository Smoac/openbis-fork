#show allResults

{project} = ch.systemsx.cisd.openbis
{generic} = ${project}.generic
{plugin} = ${project}.plugin

##########################################
# Generic module
##########################################

[generic.client] = ${generic}.client.*
[generic.server] = ${generic}.server.*
[generic.shared] = ${generic}.shared.*

check sets [generic.client] [generic.server] [generic.shared]

layer generic.client-server = [generic.client] [generic.server]
layer generic.shared = [generic.shared]

check layeringOf generic.shared generic.client-server

#-------- Web client ---------------------

{generic.web} = ${generic}.client.web

[generic.web.client] = ${generic.web}.client.application.*
[generic.web.shared] = ${generic.web}.client.* excluding [generic.web.client]
[generic.web.server] = ${generic.web}.server.*

check sets [generic.web.client] [generic.web.server] [generic.web.shared]

layer generic.web.client-server = [generic.web.client] [generic.web.server]
layer generic.web.shared = [generic.web.shared]

check layeringOf generic.web.shared generic.web.client-server

{generic.web.ui} = ${generic.web}.client.application.ui

[sample-browser] = ${generic.web.ui}.sample_browser
[admin-console] = ${generic.web.ui}.amc
check [sample-browser] independentOf [admin-console]
check [admin-console]  independentOf [sample-browser]

#-------- Server -------------------------
{generic.server} = ${generic}.server

[generic.server.authorization] = ${generic.server}.authorization.*
[generic.server.business] = ${generic.server}.business.*
[generic.server.dataaccess] = ${generic.server}.dataaccess.*
[generic.server.util] = ${generic.server}.util.*
[generic.server-subpackages] = ${generic.server}.* excluding ${generic.server}.*.*

check sets [generic.server.authorization] [generic.server.business] [generic.server.dataaccess] \
           [generic.server.util] [generic.server-subpackages]

layer generic.server.1 = [generic.server.dataaccess]
layer generic.server.2 = [generic.server.util]
layer generic.server.3 = [generic.server.authorization]
layer generic.server.4 = [generic.server.business]
layer generic.server.5 = [generic.server-subpackages]

check layeringOf generic.server.1 generic.server.2 generic.server.3 generic.server.4 generic.server.5 

##########################################
# Plugins
##########################################

{plugin.generic} = ${plugin}.generic
{plugin.screening} = ${plugin}.screening

[plugin.generic] = ${plugin.generic}.*
[plugin.screening] = ${plugin.screening}.*

check sets [plugin.generic] [plugin.screening]

#ÊA technology can have dependencies to the 'generic' technology but not the other way around.
check [plugin.generic] independentOf [plugin.screening]

###########################################
# Generic plugin

# Dependencies between 'client', 'server' and 'shared' packages
[plugin.generic.client] = ${plugin.generic}.client.*
[plugin.generic.server] = ${plugin.generic}.server.*
[plugin.generic.shared] = ${plugin.generic}.shared.*

check sets [plugin.generic.client] [plugin.generic.server] [plugin.generic.shared]

layer plugin.generic.client-server = [plugin.generic.client] [plugin.generic.server]
layer plugin.generic.shared = [plugin.generic.shared]

check layeringOf plugin.generic.shared plugin.generic.client-server

# Dependencies between 'web.client' and 'web.server' packages
{plugin.generic.web} = ${plugin.generic}.client.web

[plugin.generic.web.client] = ${plugin.generic.web}.client.application.*
[plugin.generic.web.server] = ${plugin.generic.web}.server.*

check sets [plugin.generic.web.client] [plugin.generic.web.server]

layer plugin.generic.web.client-server = [plugin.generic.web.client] [plugin.generic.web.server]

check layeringOf plugin.generic.web.client-server

###########################################
# Screening plugin

# Dependencies between 'client', 'server' and 'shared' packages
[plugin.screening.client] = ${plugin.screening}.client.*
[plugin.screening.server] = ${plugin.screening}.server.*
[plugin.screening.shared] = ${plugin.screening}.shared.*

check sets [plugin.screening.client] [plugin.screening.server] [plugin.screening.shared]

layer plugin.screening.client-server = [plugin.screening.client] [plugin.screening.server]
layer plugin.screening.shared = [plugin.screening.shared]

check layeringOf plugin.screening.shared plugin.screening.client-server

# Dependencies between 'web.client' and 'web.server' packages
{plugin.screening.web} = ${plugin.screening}.client.web

[plugin.screening.web.client] = ${plugin.screening.web}.client.application.*
[plugin.screening.web.server] = ${plugin.screening.web}.server.*

check sets [plugin.screening.web.client] [plugin.screening.web.server]

layer plugin.screening.web.client-server = [plugin.screening.web.client] [plugin.screening.web.server]

check layeringOf plugin.screening.web.client-server
