<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>V3ConnectionExample</title>
    <!--
        These two js files, i.e. config.js and require.js are RequireJS configuration and RequireJS library itself.
        Please check http://requirejs.org/ for more details on how RequireJS makes loading dependencies in Javascript easier.
    -->
    <script type="text/javascript" src="../../resources/api/v3/config.js"></script>
	<script type="text/javascript" src="../../resources/api/v3/require.js"></script>
</head>
<body>
    <script>
 
        require([ "openbis", "as/dto/space/search/SpaceSearchCriteria", "as/dto/space/fetchoptions/SpaceFetchOptions",
                "as/dto/service/id/CustomASServiceCode", "as/dto/service/CustomASServiceExecutionOptions" ], 
            function(openbis, SpaceSearchCriteria, SpaceFetchOptions, CustomASServiceCode, CustomASServiceExecutionOptions) {
 
                // get a reference to AS API
                var v3 = new openbis();
    
                // login to obtain a session token (the token it is automatically stored in openbis object and will be used for all subsequent API calls)
                v3.login("admin", "password").done(function() {
                    var id = new CustomASServiceCode("number-of-spaces");
                    var options = new CustomASServiceExecutionOptions();
                    v3.executeCustomASService(id, options).done(function(result) {
                        alert(result);
                    });


                    // // invoke other API methods, for instance search for spaces
                    // v3.searchSpaces(new SpaceSearchCriteria(), new SpaceFetchOptions()).done(function(result) {
    
                    //     alert("Number of spaces: " + result.getObjects().length);
    
                    //     // logout to release the resources related with the session
                    //     v3.logout();
                    // });
            });
        });
    </script>
    Test.
</body>
</html>