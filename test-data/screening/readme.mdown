Screening Test Data
===================

This folder contains scripts and other files for creating and curating data for a screening instance of openBIS.

Manifest
========

* config 
 	* openbis and dss system.properties files for a local instance of openbis

* etc 
	* A python drop-box script for dss that imports plates and analysis data

* source
	* admin-console
		* An admin-console script that creates optional meta-data for the screening test data. 
		  Running this script is not required.

	* bash
		* create-empty-screening-db.sh
			* A script that initializes an empty screening database. This must be run to create the initial 
			  database for the test data if no database exists.
			
	* python
		* generate-test-plate.py
			* A python script that generates raw-images for a plate. It can be configured, 
			  by modifying the source, to generate time and/or depth points and produce merged (RGB) or 
			  split (R, G, B in separate files) files.
			* Later, this will be expanded to produce overlay images as well
			* running generate-test-plate.py will produce a folder named PLATONIC containing images 
			  in the current directory
			* n.b. This script will only run on MacOS 10.5+
			
Use
===

Follow these instructions to use this infrastructure. It instructions assume that 
the screening version of openBIS is running inside Eclipse.

Initialize DB
-------------

Run the initialization script.

> screening/source/bash/create-empty-screening-db.sh

This will create an initial screening database with the name used by the configuration files.

Configure openBIS
-----------------

1. Replace the openBIS service.properties with screening/config/openbis-service.properties
2. Replace the dss service.properties with screening/config/dss-service.properties
3. In the screening folder create the following sub-folders 
* targets/platonic
* targets/platonic/store
* targets/platonic/incoming-platonic

Start openBIS
-------------

1. Start openBIS and DSS and log in as admin/admin.
2. Create space PLATONIC with a project in it.
3. Create an experiment in this project.
4. Create a plate sample called (you can call it PLATONIC if you want) with an 8x12 geometry. 
   It should be in space PLATONIC and assigned to the experiment just created.

Generate and Register Plate
--------------

Run the generate-test-plate.py script. If your plate is not called PLATONIC, you will need 
to rename the folder to the name of your plate. Put the folder with the images into the incoming-platonic dropbox.

View the plate in openBIS; you should see the images you registered.
