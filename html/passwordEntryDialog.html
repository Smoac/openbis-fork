
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>passwordEntryDialog</title><meta name="generator" content="MATLAB 9.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-03-21"><meta name="DC.source" content="passwordEntryDialog.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#3">History</a></li><li><a href="#4">Program Information</a></li><li><a href="#5">Check for Existance of Java</a></li><li><a href="#6">Parse Input Arguments</a></li><li><a href="#7">Determine GUI Size and Position</a></li><li><a href="#8">Create the GUI</a></li><li><a href="#9">Setup Callbacks for Objects</a></li><li><a href="#10">Wait for Completion</a></li><li><a href="#11">Get current information</a></li><li><a href="#12">DEFINE FUNCTIONS</a></li></ul></div><pre class="codeinput"><span class="keyword">function</span> [Password, UserName] = passwordEntryDialog(varargin)
</pre><pre class="codeinput"><span class="comment">% PASSWORDENTRYDIALOG</span>
<span class="comment">% [Password, UserName] = passwordEntryDialog(varargin)</span>
<span class="comment">%</span>
<span class="comment">% Create a password entry dialog for entering a password that is visibly</span>
<span class="comment">% hidden.  Java must be enabled for this function to work properly.</span>
<span class="comment">%</span>
<span class="comment">% It has only been tested on the Windows platform in R2008a.  It should</span>
<span class="comment">% work in R2007a or later.</span>
<span class="comment">%</span>
<span class="comment">% The password box is created using the Java Swing component</span>
<span class="comment">% JPasswordField.</span>
<span class="comment">%</span>
<span class="comment">% Optional Input Arguments</span>
<span class="comment">% ------------------------</span>
<span class="comment">%</span>
<span class="comment">% 'enterUserName'       DEFAULT: false</span>
<span class="comment">% Display the user name entry box.  The user name entered must be at least</span>
<span class="comment">% one character or an error dialog is displayed.</span>
<span class="comment">%</span>
<span class="comment">% 'DefaultUserName'     DEFAULT: ''</span>
<span class="comment">% String value of user name to populate in User Name box upon creation.</span>
<span class="comment">%</span>
<span class="comment">% 'ValidatePassword'    DEFAULT: false</span>
<span class="comment">% Display dialog box to reenter password for validation purposes.</span>
<span class="comment">%</span>
<span class="comment">% 'CheckPasswordLength' DEFAULT: true</span>
<span class="comment">% Check the password length to ensure it meets the specified criteria.</span>
<span class="comment">%</span>
<span class="comment">% 'PasswordLengthMin'   DEFAULT: 2</span>
<span class="comment">% Minimum password length allowed.</span>
<span class="comment">%</span>
<span class="comment">% 'PasswordLengthMax'   DEFAULT: 8</span>
<span class="comment">% Maximum password length allowed.</span>
<span class="comment">%</span>
<span class="comment">% 'WindowName'          DEFAULT: 'Login'</span>
<span class="comment">% Title of the password entry window.</span>
<span class="comment">%</span>
<span class="comment">% Examples</span>
<span class="comment">% --------</span>
<span class="comment">%</span>
<span class="comment">% Create a password dialog box with the default options.</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password] = passwordEntryDialog;</span>
<span class="comment">%</span>
<span class="comment">% Create a user name and password entry dialog box without password</span>
<span class="comment">% verification.</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password, UserName] = passwordEntryDialog('enterUserName', true)</span>
<span class="comment">%</span>
<span class="comment">% Create a user name and password entry dialog box without password</span>
<span class="comment">% verification.  Set the user name to 'jdoe' upon startup.</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password, UserName] = passwordEntryDialog('enterUserName', true,...</span>
<span class="comment">%      'DefaultUserName', 'jdoe')</span>
<span class="comment">%</span>
<span class="comment">% Create a password dialog box with password validation</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password] = passwordEntryDialog('ValidatePassword', true);</span>
<span class="comment">%</span>
<span class="comment">% Create a user name and password entry dialog box with password</span>
<span class="comment">% verification.</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password, UserName] = passwordEntryDialog('enterUserName', true,...</span>
<span class="comment">%      'ValidatePassword', true)</span>
<span class="comment">%</span>
<span class="comment">% Check the length of the password to be between 5 and 8 characters</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% [Password, UserName] = passwordEntryDialog('CheckPasswordLength', true,...</span>
<span class="comment">%      'PasswordLengthMin', 5,...</span>
<span class="comment">%      'PasswordLengthMax', 8)</span>
<span class="comment">%</span>
<span class="comment">% -----------------------------------------------------------------------</span>
<span class="comment">% Copyright (C) 2007-2008, Jesse B. Lai</span>
<span class="comment">%</span>
<span class="comment">% This program is free software: you can redistribute it and/or modify</span>
<span class="comment">% it under the terms of the GNU Lesser General Public License as published</span>
<span class="comment">% by the Free Software Foundation, either version 3 of the License, or</span>
<span class="comment">% (at your option) any later version.</span>
<span class="comment">%</span>
<span class="comment">% This program is distributed in the hope that it will be useful,</span>
<span class="comment">% but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="comment">% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="comment">% GNU Lesser General Public License for more details.</span>
<span class="comment">%</span>
<span class="comment">% You should have received a copy of the GNU Lesser General Public License</span>
<span class="comment">% along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;</span>
</pre><h2 id="3">History</h2><p>The history of this program is outlined in this section.</p><p>20080616 - JBL - 0.0.2 Started 20080612</p><p>Updated to remove requirement for uicomponent function written by Yair Altman.  Now, the Java components are created manually and the undocumented feature javacomponent is used.</p><p>A focus issue was worked out by using the drawnow command in a couple of places to allow the objects to be focused properly upon startup.</p><p>20080427 - JBL - 0.0.1 Started 20080425.</p><p>Initial version.  Uses Java to create the password entry box.  An edit box was initially attemped with the Java frame, but was occasionally getting Java exceptions when trying to query the 'SelectionStart' and 'SelectionEnd' properties.</p><p>Basic options of entering user name and password with options for password validation.</p><p>ToDo: Maybe add valid string input argument to only allow certain characters.</p><h2 id="4">Program Information</h2><pre class="codeinput"><span class="comment">% ProgramName = 'passwordEntryDialog';</span>
<span class="comment">% ProgramVersion = '0.0.2';</span>
<span class="comment">% svnRevision = '$Revision: 184 $';</span>
<span class="comment">% svnRevision = getSVNRevision(svnRevision);</span>
<span class="comment">% ProgramVersion = [ProgramVersion, '.' ,svnRevision];</span>
<span class="comment">%</span>
<span class="comment">% LastChangedDate = '$LastChangedDate: 2008-06-16 09:08:17 -0600 (Mon, 16 Jun 2008) $';</span>
<span class="comment">% ProgramDate = getSVNDate(LastChangedDate);</span>
</pre><h2 id="5">Check for Existance of Java</h2><pre class="codeinput"><span class="keyword">if</span> ~usejava(<span class="string">'swing'</span>)
   error(<span class="string">'passwordEntryDialog: Java is required for this program to run.'</span>);
<span class="keyword">end</span>
</pre><h2 id="6">Parse Input Arguments</h2><p>Input arguments are parsed with the MATLAB inputParser class.</p><pre class="codeinput"><span class="comment">% Create input parser object</span>
ProgramOptionsParser = inputParser;
ProgramOptionsParser.KeepUnmatched = true;

ProgramOptionsParser.addParamValue(<span class="string">'enterUserName'</span>, false, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue(<span class="string">'DefaultUserName'</span>, <span class="string">''</span>, @ischar);
ProgramOptionsParser.addParamValue(<span class="string">'ValidatePassword'</span>, false, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue(<span class="string">'CheckPasswordLength'</span>, true, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue(<span class="string">'PasswordLengthMin'</span>, 2, @isnumeric);
ProgramOptionsParser.addParamValue(<span class="string">'PasswordLengthMax'</span>, 8, @isnumeric);
ProgramOptionsParser.addParamValue(<span class="string">'WindowName'</span>, <span class="string">'Login'</span>, @ischar);

<span class="comment">% Parse Input Arguments</span>
<span class="keyword">try</span>
    ProgramOptionsParser.parse(varargin{:});
<span class="keyword">catch</span> Error
    ProgramOptionsParser.parse;
    <span class="keyword">if</span> strcmpi(Error.identifier, <span class="string">'MATLAB:InputParser:ArgumentFailedValidation'</span>)
        error(Error.identifier, Error.message);
    <span class="keyword">end</span>;
<span class="keyword">end</span>;

ProgramOptions = ProgramOptionsParser.Results;

<span class="comment">% Validate password length options</span>
<span class="keyword">if</span> ProgramOptions.CheckPasswordLength
    <span class="keyword">if</span> ProgramOptions.PasswordLengthMax &lt; ProgramOptions.PasswordLengthMin
        error(<span class="string">'MATLAB:InputParser:ArgumentFailedValidation'</span>, <span class="string">'PasswordLengthMax must be greater than PasswordLengthMin'</span>);
    <span class="keyword">end</span>;
<span class="keyword">end</span>;
</pre><h2 id="7">Determine GUI Size and Position</h2><p>Center the GUI on the screen.</p><pre class="codeinput">set(0,<span class="string">'Units'</span>,<span class="string">'pixels'</span>)
Screen = get(0,<span class="string">'screensize'</span>);

PositionGUI = [0 0 300 50];
<span class="keyword">if</span> ProgramOptions.enterUserName
    PositionGUI = PositionGUI + [0 0 0 50];
<span class="keyword">end</span>;
<span class="keyword">if</span> ProgramOptions.ValidatePassword
    PositionGUI = PositionGUI + [0 0 0 50];
    OffsetBottom = 43;
<span class="keyword">else</span>
    OffsetBottom = 0;
<span class="keyword">end</span>;

PositionGUI = [Screen(3:4)/2-PositionGUI(3:4)/2 PositionGUI(3:4)];
PositionLeft = 10;
BoxWidth = 200;
</pre><h2 id="8">Create the GUI</h2><pre class="codeinput">BackgroundColor = get(0,<span class="string">'DefaultUicontrolBackgroundcolor'</span>);
handles.figure1 = figure(<span class="string">'Menubar'</span>,<span class="string">'none'</span>, <span class="keyword">...</span>
    <span class="string">'Units'</span>,<span class="string">'Pixels'</span>, <span class="keyword">...</span>
    <span class="string">'Resize'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
    <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>, <span class="keyword">...</span>
    <span class="string">'Name'</span>,ProgramOptions.WindowName, <span class="keyword">...</span>
    <span class="string">'Position'</span>,PositionGUI, <span class="keyword">...</span>
    <span class="string">'Color'</span>, BackgroundColor, <span class="keyword">...</span>
    <span class="string">'WindowStyle'</span>,<span class="string">'modal'</span>);

<span class="comment">% Create Password Validation Entry Box</span>
<span class="keyword">if</span> ProgramOptions.ValidatePassword
    handles.java_PasswordValidate = javax.swing.JPasswordField();
    handles.java_PasswordValidate.setFocusable(true);
    [handles.java_PasswordValidate, handles.edit_PasswordValidate] = javacomponent(handles.java_PasswordValidate, [], handles.figure1);

    set(handles.edit_PasswordValidate, <span class="keyword">...</span>
        <span class="string">'Parent'</span>, handles.figure1, <span class="keyword">...</span>
        <span class="string">'Tag'</span>, <span class="string">'edit_PasswordValidate'</span>, <span class="keyword">...</span>
        <span class="string">'Units'</span>, <span class="string">'Pixels'</span>, <span class="keyword">...</span>
        <span class="string">'Position'</span>,[PositionLeft 10 BoxWidth 23]);

    handles.text_LabelPasswordValidate = uicontrol(<span class="string">'Parent'</span>,handles.figure1, <span class="keyword">...</span>
        <span class="string">'Tag'</span>, <span class="string">'text_LabelPassword'</span>, <span class="keyword">...</span>
        <span class="string">'Style'</span>,<span class="string">'Text'</span>, <span class="keyword">...</span>
        <span class="string">'Units'</span>,<span class="string">'Pixels'</span>,<span class="keyword">...</span>
        <span class="string">'Position'</span>,[PositionLeft 33 BoxWidth 16], <span class="keyword">...</span>
        <span class="string">'FontSize'</span>,10, <span class="keyword">...</span>
        <span class="string">'String'</span>,<span class="string">'Reenter password:'</span>,<span class="keyword">...</span>
        <span class="string">'HorizontalAlignment'</span>, <span class="string">'Left'</span>);
<span class="keyword">end</span>;

<span class="comment">% Create Password Entry Box</span>
handles.java_Password = javax.swing.JPasswordField();
[handles.java_Password, handles.edit_Password] = javacomponent(handles.java_Password, [PositionLeft 10+OffsetBottom BoxWidth 23], handles.figure1);
handles.java_Password.setFocusable(true);

set(handles.edit_Password, <span class="keyword">...</span>
    <span class="string">'Parent'</span>, handles.figure1, <span class="keyword">...</span>
    <span class="string">'Tag'</span>, <span class="string">'edit_Password'</span>, <span class="keyword">...</span>
    <span class="string">'Units'</span>, <span class="string">'Pixels'</span>, <span class="keyword">...</span>
    <span class="string">'Position'</span>,[PositionLeft 10+OffsetBottom BoxWidth 23]);
drawnow;    <span class="comment">% This drawnow is required to allow the focus to work</span>

handles.text_LabelPassword = uicontrol(<span class="string">'Parent'</span>,handles.figure1, <span class="keyword">...</span>
    <span class="string">'Tag'</span>, <span class="string">'text_LabelPassword'</span>, <span class="keyword">...</span>
    <span class="string">'Style'</span>,<span class="string">'Text'</span>, <span class="keyword">...</span>
    <span class="string">'Units'</span>,<span class="string">'Pixels'</span>,<span class="keyword">...</span>
    <span class="string">'Position'</span>,[PositionLeft 33+OffsetBottom BoxWidth 16], <span class="keyword">...</span>
    <span class="string">'FontSize'</span>,10, <span class="keyword">...</span>
    <span class="string">'String'</span>,<span class="string">'Key:'</span>,<span class="keyword">...</span>
    <span class="string">'HorizontalAlignment'</span>, <span class="string">'Left'</span>);

<span class="comment">% Create OK Pushbutton</span>
handles.pushbutton_OK = uicontrol(<span class="string">'Parent'</span>,handles.figure1, <span class="keyword">...</span>
    <span class="string">'Tag'</span>, <span class="string">'pushbutton_OK'</span>, <span class="keyword">...</span>
    <span class="string">'Style'</span>,<span class="string">'Pushbutton'</span>, <span class="keyword">...</span>
    <span class="string">'Units'</span>,<span class="string">'Pixels'</span>,<span class="keyword">...</span>
    <span class="string">'Position'</span>,[PositionLeft+BoxWidth+5 10 30 23], <span class="keyword">...</span>
    <span class="string">'FontSize'</span>,10, <span class="keyword">...</span>
    <span class="string">'String'</span>,<span class="string">'OK'</span>,<span class="keyword">...</span>
    <span class="string">'HorizontalAlignment'</span>, <span class="string">'Center'</span>);

<span class="comment">% Create Cancel Pushbutton</span>
handles.pushbutton_Cancel = uicontrol(<span class="string">'Parent'</span>,handles.figure1, <span class="keyword">...</span>
    <span class="string">'Tag'</span>, <span class="string">'pushbutton_Cancel'</span>, <span class="keyword">...</span>
    <span class="string">'Style'</span>,<span class="string">'Pushbutton'</span>, <span class="keyword">...</span>
    <span class="string">'Units'</span>,<span class="string">'Pixels'</span>,<span class="keyword">...</span>
    <span class="string">'Position'</span>,[PositionLeft+BoxWidth+30+7 10 50 23], <span class="keyword">...</span>
    <span class="string">'FontSize'</span>,10, <span class="keyword">...</span>
    <span class="string">'String'</span>,<span class="string">'Cancel'</span>,<span class="keyword">...</span>
    <span class="string">'HorizontalAlignment'</span>, <span class="string">'Center'</span>);

<span class="comment">% Create User Name Edit Box</span>
<span class="keyword">if</span> ProgramOptions.enterUserName
    handles.java_UserName = javax.swing.JTextField();
    handles.java_UserName.setFocusable(true);
    [handles.java_UserName, handles.edit_UserName] = javacomponent(handles.java_UserName, [], handles.figure1);

    set(handles.edit_UserName, <span class="keyword">...</span>
        <span class="string">'Parent'</span>, handles.figure1, <span class="keyword">...</span>
        <span class="string">'Tag'</span>, <span class="string">'edit_UserName'</span>, <span class="keyword">...</span>
        <span class="string">'Units'</span>, <span class="string">'Pixels'</span>, <span class="keyword">...</span>
        <span class="string">'Position'</span>,[PositionLeft 53+OffsetBottom 200 23]);
    set(handles.java_UserName, <span class="string">'Text'</span>, ProgramOptions.DefaultUserName);
    drawnow;    <span class="comment">% This drawnow is required to allow the focus to work</span>

    handles.text_LabelUserName = uicontrol(<span class="string">'Parent'</span>,handles.figure1, <span class="keyword">...</span>
        <span class="string">'Tag'</span>, <span class="string">'text_LabelUserName'</span>, <span class="keyword">...</span>
        <span class="string">'Style'</span>,<span class="string">'Text'</span>, <span class="keyword">...</span>
        <span class="string">'Units'</span>,<span class="string">'Pixels'</span>,<span class="keyword">...</span>
        <span class="string">'Position'</span>,[PositionLeft 76+OffsetBottom 200 16], <span class="keyword">...</span>
        <span class="string">'FontSize'</span>,10, <span class="keyword">...</span>
        <span class="string">'String'</span>,<span class="string">'User name:'</span>,<span class="keyword">...</span>
        <span class="string">'HorizontalAlignment'</span>, <span class="string">'Left'</span>);

    <span class="comment">%uicontrol(handles.edit_UserName);</span>
    <span class="comment">%set(handles.figure1,'CurrentObject',handles.java_UserName)</span>
    handles.java_UserName.requestFocus;     <span class="comment">% Get focus</span>
    drawnow;
<span class="keyword">else</span>
    handles.java_Password.requestFocus;     <span class="comment">% Get focus</span>
    drawnow;
<span class="keyword">end</span>;
</pre><h2 id="9">Setup Callbacks for Objects</h2><p>Adds the callback functions for the objects in the GUI</p><pre class="codeinput">set(handles.pushbutton_OK,     <span class="string">'Callback'</span>, {@pushbutton_OK_Callback, handles, ProgramOptions}, <span class="string">'KeyPressFcn'</span>, {@pushbutton_KeyPressFcn, handles, ProgramOptions});
set(handles.pushbutton_Cancel, <span class="string">'Callback'</span>, {@pushbutton_Cancel_Callback, handles, ProgramOptions}, <span class="string">'KeyPressFcn'</span>, {@pushbutton_KeyPressFcn, handles, ProgramOptions});
set(handles.java_Password, <span class="string">'ActionPerformedCallback'</span>, {@pushbutton_OK_Callback, handles, ProgramOptions});

<span class="keyword">if</span> ProgramOptions.ValidatePassword
    <span class="keyword">if</span> ProgramOptions.enterUserName
        ObjectNext = handles.java_UserName;
    <span class="keyword">else</span>
        ObjectNext = handles.java_Password;
    <span class="keyword">end</span>;
    set(handles.java_PasswordValidate, <span class="string">'ActionPerformedCallback'</span>, {@pushbutton_OK_Callback, handles, ProgramOptions}, <span class="string">'NextFocusableComponent'</span>, ObjectNext);
    set(handles.java_Password, <span class="string">'NextFocusableComponent'</span>, handles.java_PasswordValidate);
<span class="keyword">elseif</span> ProgramOptions.enterUserName
    set(handles.java_Password, <span class="string">'NextFocusableComponent'</span>, handles.java_UserName);
<span class="keyword">end</span>;

<span class="keyword">if</span> ProgramOptions.enterUserName
    set(handles.java_UserName, <span class="string">'ActionPerformedCallback'</span>, {@pushbutton_OK_Callback, handles, ProgramOptions}, <span class="string">'NextFocusableComponent'</span>, handles.java_Password);
<span class="keyword">end</span>;

setappdata(handles.figure1, <span class="string">'isCanceled'</span>, false);
</pre><h2 id="10">Wait for Completion</h2><pre class="codeinput"><span class="comment">% Wait for the user to complete entry.</span>
drawnow;
uiwait(handles.figure1);
</pre><h2 id="11">Get current information</h2><p>User either closed the window or pressed cancel or OK.</p><pre class="codeinput">isCanceled = ~ishandle(handles.figure1) || getappdata(handles.figure1, <span class="string">'isCanceled'</span>);
<span class="keyword">if</span> isCanceled
    <span class="keyword">if</span> ishandle(handles.figure1)
        delete(handles.figure1);
    <span class="keyword">end</span>;
    Password = -1;
    UserName = <span class="string">''</span>;
    <span class="keyword">return</span>;
<span class="keyword">end</span>;

Password = handles.java_Password.Password';
<span class="keyword">if</span> ProgramOptions.enterUserName
    UserName = strtrim(get(handles.java_UserName, <span class="string">'Text'</span>));
<span class="keyword">else</span>
    UserName = <span class="string">''</span>;
<span class="keyword">end</span>;
delete(handles.figure1);
</pre><h2 id="12">DEFINE FUNCTIONS</h2><p>The subfunctions required by this program are in the following section.</p><pre class="codeinput"><span class="keyword">function</span> pushbutton_KeyPressFcn(hObject, eventdata, handles, ProgramOptions)

<span class="keyword">switch</span> eventdata.Key
    <span class="keyword">case</span> <span class="string">'return'</span>
        Callback = get(hObject, <span class="string">'Callback'</span>);
        feval(Callback{1}, hObject, <span class="string">''</span>, Callback{2:end});
<span class="keyword">end</span>;

<span class="keyword">function</span> pushbutton_OK_Callback(hObject, eventdata, handles, ProgramOptions)
<span class="keyword">if</span> ProgramOptions.enterUserName
    <span class="comment">% Check if username is blank</span>
    UserName = strtrim(get(handles.java_UserName, <span class="string">'Text'</span>));
    <span class="keyword">if</span> isempty(UserName)
        strMessage = <span class="string">'Username is blank'</span>;
        <span class="comment">%disp(strMessage)</span>
        hError = errordlg(strMessage, <span class="string">'passwordEntryDialog'</span>);
        uiwait(hError);
        <span class="keyword">return</span>;
    <span class="keyword">end</span>;
<span class="keyword">end</span>;

<span class="keyword">if</span> ProgramOptions.CheckPasswordLength
    <span class="comment">%Password = handles.edit_Password.Password';</span>
    Password = handles.java_Password.Password';
    <span class="keyword">if</span> length(Password) &lt; ProgramOptions.PasswordLengthMin || length(Password) &gt; ProgramOptions.PasswordLengthMax
        strMessage = sprintf(<span class="string">'Password must be between %d and %d characters'</span>, <span class="keyword">...</span>
            ProgramOptions.PasswordLengthMin, <span class="keyword">...</span>
            ProgramOptions.PasswordLengthMax);
        <span class="comment">%disp(strMessage);</span>
        hError = errordlg(strMessage, <span class="string">'passwordEntryDialog'</span>);
        uiwait(hError);
        <span class="keyword">if</span> ProgramOptions.ValidatePassword
            set(handles.java_PasswordValidate,<span class="string">'Text'</span>, <span class="string">''</span>);
        <span class="keyword">end</span>;
        handles.java_Password.requestFocus
        <span class="keyword">return</span>;
    <span class="keyword">end</span>;
<span class="keyword">end</span>;

<span class="keyword">if</span> ProgramOptions.ValidatePassword
    <span class="comment">% Check if passwords match</span>
    <span class="keyword">if</span> ~isequal(handles.java_Password.Password, handles.java_PasswordValidate.Password)
        strMessage = <span class="string">'Passwords do not match.  Please try again'</span>;
        <span class="comment">%disp(strMessage);</span>
        hError=errordlg(strMessage, <span class="string">'passwordEntryDialog'</span>,<span class="string">'modal'</span>);
        uiwait(hError);
        set(handles.java_Password,<span class="string">'Text'</span>, <span class="string">''</span>);
        set(handles.java_PasswordValidate,<span class="string">'Text'</span>, <span class="string">''</span>);

        handles.java_Password.requestFocus
        <span class="keyword">return</span>;
    <span class="keyword">end</span>;
<span class="keyword">end</span>;
uiresume(handles.figure1);

<span class="keyword">function</span> pushbutton_Cancel_Callback(hObject, eventdata, handles, ProgramOptions)
setappdata(handles.figure1, <span class="string">'isCanceled'</span>, true);
uiresume(handles.figure1);
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018a</a><br></p></div><!--
##### SOURCE BEGIN #####
function [Password, UserName] = passwordEntryDialog(varargin)
% PASSWORDENTRYDIALOG
% [Password, UserName] = passwordEntryDialog(varargin)
%
% Create a password entry dialog for entering a password that is visibly
% hidden.  Java must be enabled for this function to work properly.
%
% It has only been tested on the Windows platform in R2008a.  It should
% work in R2007a or later.
%
% The password box is created using the Java Swing component
% JPasswordField.
%
% Optional Input Arguments
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%
% 'enterUserName'       DEFAULT: false
% Display the user name entry box.  The user name entered must be at least
% one character or an error dialog is displayed.
%
% 'DefaultUserName'     DEFAULT: ''
% String value of user name to populate in User Name box upon creation.
%
% 'ValidatePassword'    DEFAULT: false
% Display dialog box to reenter password for validation purposes.
%
% 'CheckPasswordLength' DEFAULT: true
% Check the password length to ensure it meets the specified criteria.
%
% 'PasswordLengthMin'   DEFAULT: 2
% Minimum password length allowed.
%
% 'PasswordLengthMax'   DEFAULT: 8
% Maximum password length allowed.
%
% 'WindowName'          DEFAULT: 'Login'
% Title of the password entry window.
%
% Examples
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%
% Create a password dialog box with the default options.
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password] = passwordEntryDialog;
%
% Create a user name and password entry dialog box without password
% verification.
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password, UserName] = passwordEntryDialog('enterUserName', true)
%
% Create a user name and password entry dialog box without password
% verification.  Set the user name to 'jdoe' upon startup.
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password, UserName] = passwordEntryDialog('enterUserName', true,...
%      'DefaultUserName', 'jdoe')
%
% Create a password dialog box with password validation
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password] = passwordEntryDialog('ValidatePassword', true);
%
% Create a user name and password entry dialog box with password
% verification.
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password, UserName] = passwordEntryDialog('enterUserName', true,...
%      'ValidatePassword', true)
%
% Check the length of the password to be between 5 and 8 characters
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% [Password, UserName] = passwordEntryDialog('CheckPasswordLength', true,...
%      'PasswordLengthMin', 5,...
%      'PasswordLengthMax', 8)
%
% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-
% Copyright (C) 2007-2008, Jesse B. Lai
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU Lesser General Public License as published
% by the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU Lesser General Public License for more details.
%
% You should have received a copy of the GNU Lesser General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>

%% History
% The history of this program is outlined in this section.
%
% 20080616 - JBL - 0.0.2
% Started 20080612
%
% Updated to remove requirement for uicomponent function written by Yair
% Altman.  Now, the Java components are created manually and the
% undocumented feature javacomponent is used.
%
% A focus issue was worked out by using the drawnow command in a couple of
% places to allow the objects to be focused properly upon startup.
%
% 20080427 - JBL - 0.0.1
% Started 20080425.
%
% Initial version.  Uses Java to create the password entry box.  An edit
% box was initially attemped with the Java frame, but was occasionally
% getting Java exceptions when trying to query the 'SelectionStart' and
% 'SelectionEnd' properties.
%
% Basic options of entering user name and password with options for
% password validation.
%
% ToDo: Maybe add valid string input argument to only allow certain
% characters.

%% Program Information

% ProgramName = 'passwordEntryDialog';
% ProgramVersion = '0.0.2';
% svnRevision = '$Revision: 184 $';
% svnRevision = getSVNRevision(svnRevision);
% ProgramVersion = [ProgramVersion, '.' ,svnRevision];
%
% LastChangedDate = '$LastChangedDate: 2008-06-16 09:08:17 -0600 (Mon, 16 Jun 2008) $';
% ProgramDate = getSVNDate(LastChangedDate);

%% Check for Existance of Java
if ~usejava('swing')
   error('passwordEntryDialog: Java is required for this program to run.');
end

%% Parse Input Arguments
% Input arguments are parsed with the MATLAB inputParser class.

% Create input parser object
ProgramOptionsParser = inputParser;
ProgramOptionsParser.KeepUnmatched = true;

ProgramOptionsParser.addParamValue('enterUserName', false, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue('DefaultUserName', '', @ischar);
ProgramOptionsParser.addParamValue('ValidatePassword', false, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue('CheckPasswordLength', true, @(x) islogical(x) || isnumeric(x));
ProgramOptionsParser.addParamValue('PasswordLengthMin', 2, @isnumeric);
ProgramOptionsParser.addParamValue('PasswordLengthMax', 8, @isnumeric);
ProgramOptionsParser.addParamValue('WindowName', 'Login', @ischar);

% Parse Input Arguments
try
    ProgramOptionsParser.parse(varargin{:});
catch Error
    ProgramOptionsParser.parse;
    if strcmpi(Error.identifier, 'MATLAB:InputParser:ArgumentFailedValidation')
        error(Error.identifier, Error.message);
    end;
end;

ProgramOptions = ProgramOptionsParser.Results;

% Validate password length options
if ProgramOptions.CheckPasswordLength
    if ProgramOptions.PasswordLengthMax < ProgramOptions.PasswordLengthMin
        error('MATLAB:InputParser:ArgumentFailedValidation', 'PasswordLengthMax must be greater than PasswordLengthMin');
    end;
end;

%% Determine GUI Size and Position
% Center the GUI on the screen.

set(0,'Units','pixels')
Screen = get(0,'screensize');

PositionGUI = [0 0 300 50];
if ProgramOptions.enterUserName
    PositionGUI = PositionGUI + [0 0 0 50];
end;
if ProgramOptions.ValidatePassword
    PositionGUI = PositionGUI + [0 0 0 50];
    OffsetBottom = 43;
else
    OffsetBottom = 0;
end;

PositionGUI = [Screen(3:4)/2-PositionGUI(3:4)/2 PositionGUI(3:4)];
PositionLeft = 10;
BoxWidth = 200;

%% Create the GUI

BackgroundColor = get(0,'DefaultUicontrolBackgroundcolor');
handles.figure1 = figure('Menubar','none', ...
    'Units','Pixels', ...
    'Resize','off', ...
    'NumberTitle','off', ...
    'Name',ProgramOptions.WindowName, ...
    'Position',PositionGUI, ...
    'Color', BackgroundColor, ...
    'WindowStyle','modal');

% Create Password Validation Entry Box
if ProgramOptions.ValidatePassword
    handles.java_PasswordValidate = javax.swing.JPasswordField();
    handles.java_PasswordValidate.setFocusable(true);
    [handles.java_PasswordValidate, handles.edit_PasswordValidate] = javacomponent(handles.java_PasswordValidate, [], handles.figure1);

    set(handles.edit_PasswordValidate, ...
        'Parent', handles.figure1, ...
        'Tag', 'edit_PasswordValidate', ...
        'Units', 'Pixels', ...
        'Position',[PositionLeft 10 BoxWidth 23]);

    handles.text_LabelPasswordValidate = uicontrol('Parent',handles.figure1, ...
        'Tag', 'text_LabelPassword', ...
        'Style','Text', ...
        'Units','Pixels',...
        'Position',[PositionLeft 33 BoxWidth 16], ...
        'FontSize',10, ...
        'String','Reenter password:',...
        'HorizontalAlignment', 'Left');
end;

% Create Password Entry Box
handles.java_Password = javax.swing.JPasswordField();
[handles.java_Password, handles.edit_Password] = javacomponent(handles.java_Password, [PositionLeft 10+OffsetBottom BoxWidth 23], handles.figure1);
handles.java_Password.setFocusable(true);

set(handles.edit_Password, ...
    'Parent', handles.figure1, ...
    'Tag', 'edit_Password', ...
    'Units', 'Pixels', ...
    'Position',[PositionLeft 10+OffsetBottom BoxWidth 23]);
drawnow;    % This drawnow is required to allow the focus to work
   
handles.text_LabelPassword = uicontrol('Parent',handles.figure1, ...
    'Tag', 'text_LabelPassword', ...
    'Style','Text', ...
    'Units','Pixels',...
    'Position',[PositionLeft 33+OffsetBottom BoxWidth 16], ...
    'FontSize',10, ...
    'String','Key:',...
    'HorizontalAlignment', 'Left');

% Create OK Pushbutton
handles.pushbutton_OK = uicontrol('Parent',handles.figure1, ...
    'Tag', 'pushbutton_OK', ...
    'Style','Pushbutton', ...
    'Units','Pixels',...
    'Position',[PositionLeft+BoxWidth+5 10 30 23], ...
    'FontSize',10, ...
    'String','OK',...
    'HorizontalAlignment', 'Center');

% Create Cancel Pushbutton
handles.pushbutton_Cancel = uicontrol('Parent',handles.figure1, ...
    'Tag', 'pushbutton_Cancel', ...
    'Style','Pushbutton', ...
    'Units','Pixels',...
    'Position',[PositionLeft+BoxWidth+30+7 10 50 23], ...
    'FontSize',10, ...
    'String','Cancel',...
    'HorizontalAlignment', 'Center');

% Create User Name Edit Box
if ProgramOptions.enterUserName
    handles.java_UserName = javax.swing.JTextField();
    handles.java_UserName.setFocusable(true);
    [handles.java_UserName, handles.edit_UserName] = javacomponent(handles.java_UserName, [], handles.figure1);

    set(handles.edit_UserName, ...
        'Parent', handles.figure1, ...
        'Tag', 'edit_UserName', ...
        'Units', 'Pixels', ...
        'Position',[PositionLeft 53+OffsetBottom 200 23]);
    set(handles.java_UserName, 'Text', ProgramOptions.DefaultUserName);
    drawnow;    % This drawnow is required to allow the focus to work

    handles.text_LabelUserName = uicontrol('Parent',handles.figure1, ...
        'Tag', 'text_LabelUserName', ...
        'Style','Text', ...
        'Units','Pixels',...
        'Position',[PositionLeft 76+OffsetBottom 200 16], ...
        'FontSize',10, ...
        'String','User name:',...
        'HorizontalAlignment', 'Left');

    %uicontrol(handles.edit_UserName);
    %set(handles.figure1,'CurrentObject',handles.java_UserName)
    handles.java_UserName.requestFocus;     % Get focus
    drawnow;
else
    handles.java_Password.requestFocus;     % Get focus
    drawnow;
end;

%% Setup Callbacks for Objects
% Adds the callback functions for the objects in the GUI

set(handles.pushbutton_OK,     'Callback', {@pushbutton_OK_Callback, handles, ProgramOptions}, 'KeyPressFcn', {@pushbutton_KeyPressFcn, handles, ProgramOptions});
set(handles.pushbutton_Cancel, 'Callback', {@pushbutton_Cancel_Callback, handles, ProgramOptions}, 'KeyPressFcn', {@pushbutton_KeyPressFcn, handles, ProgramOptions});
set(handles.java_Password, 'ActionPerformedCallback', {@pushbutton_OK_Callback, handles, ProgramOptions});

if ProgramOptions.ValidatePassword
    if ProgramOptions.enterUserName
        ObjectNext = handles.java_UserName;
    else
        ObjectNext = handles.java_Password;
    end;
    set(handles.java_PasswordValidate, 'ActionPerformedCallback', {@pushbutton_OK_Callback, handles, ProgramOptions}, 'NextFocusableComponent', ObjectNext);
    set(handles.java_Password, 'NextFocusableComponent', handles.java_PasswordValidate);
elseif ProgramOptions.enterUserName
    set(handles.java_Password, 'NextFocusableComponent', handles.java_UserName);
end;

if ProgramOptions.enterUserName
    set(handles.java_UserName, 'ActionPerformedCallback', {@pushbutton_OK_Callback, handles, ProgramOptions}, 'NextFocusableComponent', handles.java_Password);
end;

setappdata(handles.figure1, 'isCanceled', false);

%% Wait for Completion

% Wait for the user to complete entry.
drawnow;
uiwait(handles.figure1);

%% Get current information
% User either closed the window or pressed cancel or OK.

isCanceled = ~ishandle(handles.figure1) || getappdata(handles.figure1, 'isCanceled');
if isCanceled
    if ishandle(handles.figure1)
        delete(handles.figure1);
    end;
    Password = -1;
    UserName = '';
    return;
end;

Password = handles.java_Password.Password';
if ProgramOptions.enterUserName
    UserName = strtrim(get(handles.java_UserName, 'Text'));
else
    UserName = '';
end;
delete(handles.figure1);

%% DEFINE FUNCTIONS
% The subfunctions required by this program are in the following section.

function pushbutton_KeyPressFcn(hObject, eventdata, handles, ProgramOptions)

switch eventdata.Key
    case 'return'
        Callback = get(hObject, 'Callback');
        feval(Callback{1}, hObject, '', Callback{2:end});
end;

function pushbutton_OK_Callback(hObject, eventdata, handles, ProgramOptions)
if ProgramOptions.enterUserName
    % Check if username is blank
    UserName = strtrim(get(handles.java_UserName, 'Text'));
    if isempty(UserName)
        strMessage = 'Username is blank';
        %disp(strMessage)
        hError = errordlg(strMessage, 'passwordEntryDialog');
        uiwait(hError);
        return;
    end;
end;

if ProgramOptions.CheckPasswordLength
    %Password = handles.edit_Password.Password';
    Password = handles.java_Password.Password';
    if length(Password) < ProgramOptions.PasswordLengthMin || length(Password) > ProgramOptions.PasswordLengthMax
        strMessage = sprintf('Password must be between %d and %d characters', ...
            ProgramOptions.PasswordLengthMin, ...
            ProgramOptions.PasswordLengthMax);
        %disp(strMessage);
        hError = errordlg(strMessage, 'passwordEntryDialog');
        uiwait(hError);
        if ProgramOptions.ValidatePassword
            set(handles.java_PasswordValidate,'Text', '');
        end;
        handles.java_Password.requestFocus
        return;
    end;
end;

if ProgramOptions.ValidatePassword
    % Check if passwords match
    if ~isequal(handles.java_Password.Password, handles.java_PasswordValidate.Password)
        strMessage = 'Passwords do not match.  Please try again';
        %disp(strMessage);
        hError=errordlg(strMessage, 'passwordEntryDialog','modal');
        uiwait(hError);
        set(handles.java_Password,'Text', '');
        set(handles.java_PasswordValidate,'Text', '');

        handles.java_Password.requestFocus
        return;
    end;
end;
uiresume(handles.figure1);

function pushbutton_Cancel_Callback(hObject, eventdata, handles, ProgramOptions)
setappdata(handles.figure1, 'isCanceled', true);
uiresume(handles.figure1);
##### SOURCE END #####
--></body></html>