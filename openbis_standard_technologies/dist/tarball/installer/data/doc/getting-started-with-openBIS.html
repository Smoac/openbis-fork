<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <link href="css/getting-started-with-openBIS.css" rel="stylesheet" type="text/css">
  <title>Getting started with openBIS</title>
</head>

<body>
  
  <h1> Getting started with openBIS <h1>
  
  <div><img alt="openBIS" id="openbis-logo" name="openbis-logo" src="images/openBIS_Logo.svg" style=
  "position: absolute; top: 10px; right: 20px; height: 80px;"></div>

  <h3>A. Start servers</h3>The installation has completed successfully. To start openBIS launch the following script:

  <div class="sourcecode">
    ${INSTALL_BIN_PATH}/allup.sh
  </div>This command might take several minutes on the inital startup, depending on the performance of your server!<br>
  After the completion of the above command openBIS will be available at <a href=
  "https://localhost:8443/openbis">https://localhost:8443/openbis</a><br><br>
  
  <div class="text">
  Note: by default, openBIS expects to be able to connect your PostgreSQL database as superuser 'postgres' without a password.
  This is because openBIS needs to create its database users and schemas.
  If this assumption does not hold, the following commands print the SQL scripts that can be used to create the required databases manually:<br>
  </div>

  openBIS application server database:
  <div class="sourcecode">
    ${INSTALL_BIN_PATH}/init_database.sh openbis_prod openbis
  </div> 
  
  DSS pathinfo database:
  <div class="sourcecode">
    ${INSTALL_BIN_PATH}/init_database.sh pathinfo_prod openbis
  </div> 

  Imaging database (required only if technology 'screening' is enabled)
  <div class="sourcecode">
    ${INSTALL_BIN_PATH}/init_database.sh imaging_prod openbis
  </div> 
  
  Proteomics database (required only if technology 'proteomics' is enabled)
  <div class="sourcecode">
    ${INSTALL_BIN_PATH}/init_database.sh proteomics_productive openbis
  </div> 
  
  <div class="text"> 
  The first argument of script 'init_database.sh' defines the database name. The second argument defines the username that openBIS will be using to connect the corresponding database.
  Again, openBIS expects the user(s) can connect the database without a password. If this is not the case, the password needs to be set to service.properties.
  Consult openBIS documentation for details.
  </div>
  
  <h3>B. Importing test data</h3>

  <p>By now you have a fully functional openBIS instance, but it makes little sense if it has no data in it.</p>

  <h4 class="generic">Generic</h4>

  <p>Here are the steps to register a file/folder as a data set into openBIS.</p>

  <ol>
    <li>Log in to <a href="https://localhost:8443/openbis">openBIS</a> as admin.
    </li>

    <li>Open the Data Set Uploader application by clicking on the menu item Import -&gt; Data Set Registration.<br>
    The application will be started via Java Web Start. You may be asked to trust the self-signed certificate.</li>

    <li>Choose a file/folder in the Data Set Uploader application.</li>

    <li>Choose a sample and click the upload button.</li>
  </ol>

  <p></p>

  <h4 class="proteomics">Proteomics</h4>

  <p>Here are the steps to get an example prot.XML into openBIS.</p>

  <ol>
    <li>Log in to <a href="https://localhost:8443/openbis">openBIS</a> as admin.
    </li>

    <li>Open space browser by clicking on menu item Admin -&gt; Spaces.</li>

    <li>Create a space named TEST by using Add Space button.</li>

    <li>Create a project named PROT inside space TEST by using menu item New -&gt; Project.</li>

    <li>At the console execute the command:

      <div class="sourcecode">
        cp -R ${DSS_ROOT_DIR}/examples/test+prot ${DSS_ROOT_DIR}/incoming-ms-search
      </div>
    </li>
  </ol>

  <div class="text">
    It will create an experiment in project /TEST/PROT which shows a list of proteins. We challenge you to go find it
    in the running application !
  </div>

  <p></p>

  <h4 class="screening">Screening</h4>You could import a minimalistic example by doing the following:

  <ol>
    <li>Log in to <a href="https://localhost:8443/openbis">openBIS</a> as admin.
    </li>

    <li>Open experiment type browser by clicking on menu item Admin -&gt; Types -&gt; Experiment Types.</li>

    <li>Create experiment type SIRNA_HCS.</li>

    <li>At the console execute the command:

      <div class="sourcecode">
        cp -R ${DSS_ROOT_DIR}/examples/PLATE1 ${DSS_ROOT_DIR}/incoming-hcs
      </div>

      <div class="text"></div>
    </li>
  </ol>It will create a plate <em>PLATE1</em> with images data for one of its wells. We challenge you to go find it in
  the running application !

  <h4 class="illumina-ngs">Illumina NGS (ETH BSSE Setup)</h4>

  <ol>
    <li>A flow cell with flow lanes is created reading out two XML files provided by the Illumina sequencer:

      <div class="sourcecode">
        mkdir -p ${DSS_ROOT_DIR}/create-flowcell-hiseq/120420_SN792_0109_BC0P8LACXX/;<br>
        cp -R ${DSS_ROOT_DIR}/examples/illumina-ngs/120420_SN792_0109_BC0P8LACXX/*.xml
        ${DSS_ROOT_DIR}/create-flowcell-hiseq/120420_SN792_0109_BC0P8LACXX;<br>
        touch ${DSS_ROOT_DIR}/create-flowcell-hiseq/.MARKER_is_finished_120420_SN792_0109_BC0P8LACXX<br>
      </div>
    </li>

    <li>A flow cell output from a HiSeq2000 is registered as a data set of the sample 120420_SN792_0109_BC0P8LACXX.<br>

      Additionally a data set is registered for each flow lane:

      <div class="sourcecode">
        rsync -a --exclude=Unaligned* ${DSS_ROOT_DIR}/examples/illumina-ngs/120420_SN792_0109_BC0P8LACXX
        ${DSS_ROOT_DIR}/register-flowcell-hiseq;<br>
        touch ${DSS_ROOT_DIR}/register-flowcell-hiseq/.MARKER_is_finished_120420_SN792_0109_BC0P8LACXX;<br>
      </div>
    </li>

    <li>The sequencer is finished and we want to track this automatically. Therefore we sync the RTAComplete.txt in a
    drop box:

      <div class="sourcecode">
        mkdir -p ${DSS_ROOT_DIR}/read-rta-timestamp/120420_SN792_0109_BC0P8LACXX/; rsync
        ${DSS_ROOT_DIR}/examples/illumina-ngs/120420_SN792_0109_BC0P8LACXX/RTAComplete.txt
        ${DSS_ROOT_DIR}/read-rta-timestamp/120420_SN792_0109_BC0P8LACXX/RTAComplete.txt; touch
        ${DSS_ROOT_DIR}/read-rta-timestamp/.MARKER_is_finished_120420_SN792_0109_BC0P8LACXX
      </div>
    </li>

    <li> For creating some samples we use the 'Sample Registration'. This is available under the 'Import' menu: <br>    
      Import -> Sample Registration -> Choose sample type '(multiple)' and browse to the file:
      <div class="sourcecode">  ${DSS_ROOT_DIR}/examples/illumina-ngs/tsv-files/example_samples_with_parents.tsv</div>
      
      Tick 'Update existing'and press the 'Save' button. <br>
      This created several samples which can be viewed via Browse -> Samples. You might need to select the Sample Type 'all' <br>
      and the Space 'all'. <br>
      Note that the samples are in a parent-/child relationship indicated by the samples shown in the 'Parents' column.
    </li>
    
    <br>
    

    <li>After the demultiplexing using the Illumina 'configureBclToFastq.pl' the FASTQ files are created and also some
    statistic files are provided.<br>
      Let's register them as well in openBIS:

      <div class="sourcecode">
        
        mkdir ${DSS_ROOT_DIR}/register-unaligned/120420_SN792_0109_BC0P8LACXX; <br>
        rsync -a ${DSS_ROOT_DIR}/examples/illumina-ngs/120420_SN792_0109_BC0P8LACXX/Unaligned* ${DSS_ROOT_DIR}/register-unaligned/120420_SN792_0109_BC0P8LACXX;<br>
        touch ${DSS_ROOT_DIR}/register-unaligned/.MARKER_is_finished_120420_SN792_0109_BC0P8LACXX;
      </div>
      <br>
      The demultiplexed FASTQ files are a data set of the samples BSSE-QGF-LIBRARY-1 and BSSE-QGF-LIBRARY-2. Note that lane 1 and two <br>
      contained both samples which results in two FASTQ data sets for each sample.
      
    </li>
  </ol><br>
  A short description of all drop boxes is also provided here: <a href=
  "https://wiki-bsse.ethz.ch/display/openBISDoc/openBIS+for+Illumina+NGS" target="_blank">openBIS for Illumina
  NGS<a><br>

  <h3>Importing example data</h3>

  <p></p>

  <div class="text">
    To import example data please add plugin "[technology]-optional" to core-plugins.properties, where [technology] is
    "screening", "illumina-ngs" or "proteomics"
  </div>

  <p><br></p>

  <h3>Customizing openBIS</h3>

  <div class="text">
    In the scientific world there is no one-size-fits-them-all solutions. Your research data is certainly different
    from our example data. Luckily, openBIS provides an easy way to script the import process - the dropboxes. You can
    learn how to create your custom-tailored dropboxes <a href="https://wiki-bsse.ethz.ch/display/openbisDoc/Dropboxes"
    target="_blank">here</a>.
  </div></a></a>
</body>
</html>