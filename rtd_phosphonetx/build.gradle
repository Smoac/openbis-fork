evaluationDependsOn(':common')
evaluationDependsOn(':openbis_api')
evaluationDependsOn(':openbis-common')
evaluationDependsOn(':authentication')
evaluationDependsOn(':dbmigration')
evaluationDependsOn(':openbis')
evaluationDependsOn(':datastore_server')

apply from: '../gradle/javaproject.gradle'

dependencies {
	compile project(':common'),
			project(':datastore_server')
			
	testCompile project(path: ':datastore_server', configuration: 'tests')	
	
}

eclipse {
    classpath {
        downloadSources=true
        defaultOutputDir = file('targets/www/WEB-INF/classes')
    }
}

sourceSets { 
	test {
		resources {
			srcDirs = ['source/java']
		}
	}
}

jar {
    from('../rtd_phosphonetx/source/sql'){ 
        into("/sql") 
        include "proteomics/**/*.sql" 
    }
}


task zip(type: Zip) {
	includeEmptyDirs false
    from (jar.archivePath) {
	    into 'datastore_server/lib/'
	    rename 'datastore_server_plugin-proteomics(.*)\\.jar', 'datastore_server_plugin-proteomics.jar'
	}
    
    from (fileTree(dir: 'source/core-plugins', includes:['proteomics/**', 'proteomics-optional/**'], excludes:['**/as/**', '**/package-to-dist'])) {
		into 'core-plugins'    
	}
}
zip.dependsOn jar
build.dependsOn zip

apply from: 'gwtdev.gradle'
