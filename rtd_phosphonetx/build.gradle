evaluationDependsOn(':common')
evaluationDependsOn(':openbis_api')
evaluationDependsOn(':openbis-common')
evaluationDependsOn(':authentication')
evaluationDependsOn(':dbmigration')
evaluationDependsOn(':openbis')
evaluationDependsOn(':datastore_server')

apply from: 'http://svncisd.ethz.ch/repos/cisd/gradle/trunk/javaproject.gradle'

dependencies {
	compile project(':common'),
			project(':datastore_server')
			
	testCompile project(path: ':datastore_server', configuration: 'tests')	
	
}

sourceSets { 
	test {
		resources {
			srcDirs = ['source/java']
		}
	}
}

jar {
    from('../rtd_phosphonetx/source/sql'){ 
        into("/sql") 
        include "proteomics/**/*.sql" 
    }
}


task zip(type: Zip) {
	includeEmptyDirs false
    from (jar.archivePath) {
	    into 'datastore_server/lib/'
	    rename 'datastore_server_plugin-proteomics(.*)\\.jar', 'datastore_server_plugin-proteomics.jar'
	}
    
    from (fileTree(dir: 'source/core-plugins', includes:['proteomics/**', 'proteomics-optional/**'], excludes:['**/as/**', '**/package-to-dist'])) {
		into 'core-plugins'    
	}
}
zip.dependsOn jar
build.dependsOn zip

project.ext.gwt_module = 'ch.systemsx.cisd.openbis.plugin.proteomics.OpenBIS'
project.ext.gwt_app_path = 'openbis-test-proteomics'
apply from: '../openbis/gwtdev.gradle'
