<project name="sanofi" default="ci" basedir="..">
	<import file="../../datastore_server/build/build.xml" />
	<project-classpath name="ecp" classes="${classes}" />

	<property name="original.dist" value="dist" />
	<property name="mainfolder" value="sanofi" />
	
	<property name="sanofi.dist.file" value="${dist}/sanofi-dist.jar" />

	<target name="compile" depends="build-common.compile, clean" />

	<target name="run-tests">
		<antcall target="build-common.run-tests">
			<param name="test.suite" value="tests.xml" />
		</antcall>
	</target>
	
	<target name="dist">
		<build-info revision="revision.number" version="version.number" clean="clean.flag" />
		<echo file="${build.info.file}">${version.number}:${revision.number}:${clean.flag}</echo>
		<jar destfile="${sanofi.dist.file}">
			<fileset dir="../sanofi/dist">
				<include name="**/*.*" />
				<include name="${build.info.filename}" />
			</fileset>
			<manifest>
				<attribute name="Version" value="${version.number}" />
				<attribute name="Build-Number"
				           value="${version.number} (r${revision.number},${clean.flag})" />
			</manifest>
		</jar>
	</target>

	<!--
        // Task for continuous integration server.
  -->
	<target name="ci" depends="build-common.ci, dist" />


</project>