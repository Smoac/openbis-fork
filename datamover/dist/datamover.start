#! /bin/sh

if [ -f datamover.pid ]; then
	PID=`cat datamover.pid`
	if [ "$PID" != "" ]; then
		if [ `ps -ef |grep $PID |grep -v grep|wc -l` = 1 ] ; then
			kill $PID
			echo "Already running - killing PID $PID and restarting"
		fi
	fi
	rm datamover.pid
fi

if [ "$JAVA_HOME" != "" ]; then
	JAVA_HOME="$JAVA_HOME/bin/"
fi

${JAVA_HOME}java -jar lib/datamover.jar "$@" & echo $! > datamover.pid
